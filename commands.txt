Команды для выполнения:

1. Создание пользователей
ivanov_user = User.objects.create_user('ivanov')
petrov_user = User.objects.create_user('petrov')
popov_user = User.objects.create_user('popov')

2. Создание авторов
ivanov_author = Author.objects.create(user=ivanov_user)
petrov_author = Author.objects.create(user=petrov_user)

3. Создание категорий
category_sport = Category.objects.create(name='Спорт')
category_music = Category.objects.create(name='Музыка')
category_cars = Category.objects.create(name='Авто')
category_technologies = Category.objects.create(name='Технологии')

4. Создание постов
post_first = Post.objects.create(
    author=ivanov_author,
    post_type='AR',
    title='Электрификация автоспорта',
    text='Мир автоспорта переживает настоящую технологическую революцию. Вслед за Formula E, где соревнуются исключительно электрокары, многие классические гоночные серии активно внедряют гибридные силовые установки. Это не просто дань экологической моде, а серьезный вызов для инженеров.\nРазвитие технологий в этой сфере имеет прямой эффект для потребительского рынка. Инновации в системах рекуперативного торможения, емкости аккумуляторов и управлении мощностью, обкатанные на треке, уже через несколько лет появляются в серийных электромобилях. Таким образом, автоспорт становится мощнейшей лабораторией, ускоряющей развитие всего автоиндустрии в сторону устойчивого будущего.'
)
post_second = Post.objects.create(
    author=ivanov_author,
    post_type='AR',
    title='Как новые технологии изменили студийную запись',
    text='Процесс создания музыки за последние двадцать лет преобразился до неузнаваемости. Если раньше запись альбома требовала дорогостоящей студии с акустической обработкой, микрофонами класса премиум и целым парком аналоговой аппаратуры, то сегодня профессиональный звук можно получить практически в домашних условиях.\nКлючевую роль сыграло развитие цифровых аудиостанций (DAW), виртуальных инструментов и плагинов, имитирующих легендарные процессоры эффектов и микшерные пульты. Технологии позволили музыкантам экспериментировать без ограничений по бюджету, стирая границы между профессиональными студиями и личными проектами, и открыв новые возможности для творчества.'
)
post_third = Post.objects.create(
    author=petrov_author,
    post_type='NE',
    title='Поп-звезда стала лицом нового электрокара на предстоящем автосалоне',
    text='Известная поп-певица Алисия Рэй сегодня официально была представлена в качестве амбассадора нового футуристического электрокара EON от компании «Volt Motors». Анонс состоялся в социальных сетях артистки и автопроизводителя.\nПо словам представителей бренда, креативная энергия и инновационный стиль певицы идеально сочетаются с философией их новой модели, которая должна быть представлена на международном автосалоне в следующем месяце. В рамках сотрудничества планируется выпуск специальной версии автомобиля и саундтрека, записанного специально для рекламной кампании. Это слияние мира музыки и передовых автомобильных технологий вызвало большой ажиотаж среди поклонников обоих брендов.'
)

5. Добавление категорий к первому посту
PostCategory.objects.create(
    category=category_cars,
    post=post_first
)
PostCategory.objects.create(
    category=category_technologies,
    post=post_first
)
PostCategory.objects.create(
    category=category_sport,
    post=post_first
)

6. Добавление категорий ко второму посту
PostCategory.objects.create(
    category=category_music,
    post=post_second
)
PostCategory.objects.create(
    category=category_technologies,
    post=post_second
)

7. Добавление категорий к третьему посту
PostCategory.objects.create(
    category=category_music,
    post=post_third
)
PostCategory.objects.create(
    category=category_cars,
    post=post_third
)

8. Создание комментариев
comment_first = Comment.objects.create(
    post=post_first,
    user=popov_user,
    text='Интересная статья, но как фанат классического автоспорта с ревом ДВС, я всё ещё скептичен. Электрокары быстры, но душа гонок теряется. Интересно, сохранится ли драйв для зрителей на трибунах, когда все машины станут почти бесшумными?'
)

comment_second = Comment.objects.create(
    post=post_second,
    user=petrov_user,
    text='Вот это неожиданный коллаборация! Её последний альбом был отличным, и я как раз присматриваюсь к электромобилям. Теперь точно пойду смотреть на эту модель на автосалоне. Умный ход маркетологов — привлекают новую аудиторию.'
)

comment_third = Comment.objects.create(
    post=post_third,
    user=ivanov_user,
    text='Полностью согласен с автором. Как музыкант-любитель, подтверждаю: благодаря технологиям написание и аранжировка музыки стали в разы доступнее. Хотя, конечно, «хай-фай» звучание большой студии по-прежнему остаётся золотым стандартом, которого дома не добиться.'
)

comment_fourth = Comment.objects.create(
    post=post_first,
    user=popov_user,
    text='Главное, чтобы эти технологии из Формулы Е быстрее доходили до обычных машин. Обещали же, что супер-быстрая зарядка с трека через 5 лет будет в каждом доме. Жду не дождусь, когда поездки на дальние расстояния перестанут быть квестом на планирование.'
)

9. Генерация лайков/дизлайков (для удобства используем цикл for):
import random

for object in [post_first, post_second, post_third, comment_first, comment_second, comment_third, comment_fourth]:
    for _ in range(15):
        if random.random() < 0.3:
            object.dislike()
        else:
            object.like()

10. Обновление рейтинга пользователей:
ivanov_author.update_rating()
petrov_author.update_rating()

11. Вывод лучшего пользователя:
Author.objects.all().order_by("-rating").values("user__username", "rating").first()

12. Вывод лучшей статьи, основываясь на лайках/дислайках к этой статье
best_post = Post.objects.all().order_by("-rating").first()
best_post_values = {
    'created_at': best_post.created_at,
    'author__user__username': best_post.author.user.username,
    'rating': best_post.rating,
    'preview': best_post.preview()
}
print(best_post_values)

13. Вывод комментариев к лучшему посту
Comment.objects.filter(post=best_post).values(
    'created_at',
    'user__username',
    'rating',
    'text'
)




